<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PIO: example2.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PIO
   &#160;<span id="projectnumber">2.5.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_6df6542b1223c38c3752260fabab64d0.html">c</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">example2.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;getopt.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;mpi.h&gt;</code><br />
<code>#include &lt;<a class="el" href="pio_8h_source.html">pio.h</a>&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for example2.c:</div>
<div class="dyncontent">
<div class="center"><img src="example2_8c__incl.png" border="0" usemap="#example2_8c" alt=""/></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae763c3ffeab20d06c1ab807cabb82394"><td class="memItemLeft" align="right" valign="top"><a id="ae763c3ffeab20d06c1ab807cabb82394"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#ae763c3ffeab20d06c1ab807cabb82394">NUM_NETCDF_FLAVORS</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:ae763c3ffeab20d06c1ab807cabb82394"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of possible output netCDF output flavors available to the ParallelIO library. <br /></td></tr>
<tr class="separator:ae763c3ffeab20d06c1ab807cabb82394"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b1fd2d28c6a7d4a3f7027cc1b6466f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a2b1fd2d28c6a7d4a3f7027cc1b6466f3">NDIM</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a2b1fd2d28c6a7d4a3f7027cc1b6466f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of dimensions in the example data.  <a href="example2_8c.html#a2b1fd2d28c6a7d4a3f7027cc1b6466f3">More...</a><br /></td></tr>
<tr class="separator:a2b1fd2d28c6a7d4a3f7027cc1b6466f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9c24d600c2a3b13b5e96029500fca22"><td class="memItemLeft" align="right" valign="top"><a id="ab9c24d600c2a3b13b5e96029500fca22"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#ab9c24d600c2a3b13b5e96029500fca22">X_DIM_LEN</a>&#160;&#160;&#160;20</td></tr>
<tr class="memdesc:ab9c24d600c2a3b13b5e96029500fca22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length along x dimension. <br /></td></tr>
<tr class="separator:ab9c24d600c2a3b13b5e96029500fca22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc0499853168ac31cd7dea8099d7dcfd"><td class="memItemLeft" align="right" valign="top"><a id="afc0499853168ac31cd7dea8099d7dcfd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#afc0499853168ac31cd7dea8099d7dcfd">Y_DIM_LEN</a>&#160;&#160;&#160;30</td></tr>
<tr class="memdesc:afc0499853168ac31cd7dea8099d7dcfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length along y dimension. <br /></td></tr>
<tr class="separator:afc0499853168ac31cd7dea8099d7dcfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78076335bc3d03745246fc5ffcdd4e85"><td class="memItemLeft" align="right" valign="top"><a id="a78076335bc3d03745246fc5ffcdd4e85"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a78076335bc3d03745246fc5ffcdd4e85">NUM_TIMESTEPS</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:a78076335bc3d03745246fc5ffcdd4e85"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of timesteps of data to write. <br /></td></tr>
<tr class="separator:a78076335bc3d03745246fc5ffcdd4e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73de0b1772c59096554d6a846feff376"><td class="memItemLeft" align="right" valign="top"><a id="a73de0b1772c59096554d6a846feff376"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a73de0b1772c59096554d6a846feff376">VAR_NAME</a>&#160;&#160;&#160;&quot;foo&quot;</td></tr>
<tr class="memdesc:a73de0b1772c59096554d6a846feff376"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the variable in the netCDF output file. <br /></td></tr>
<tr class="separator:a73de0b1772c59096554d6a846feff376"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb046f73cfc287e0b5b472e51133942"><td class="memItemLeft" align="right" valign="top"><a id="a4fb046f73cfc287e0b5b472e51133942"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a4fb046f73cfc287e0b5b472e51133942">ERR_BAD</a>&#160;&#160;&#160;1001</td></tr>
<tr class="memdesc:a4fb046f73cfc287e0b5b472e51133942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code when netCDF output file does not match expectations. <br /></td></tr>
<tr class="separator:a4fb046f73cfc287e0b5b472e51133942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba5ba18a0b68130c63410845f87fa708"><td class="memItemLeft" align="right" valign="top"><a id="aba5ba18a0b68130c63410845f87fa708"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#aba5ba18a0b68130c63410845f87fa708">START_DATA_VAL</a>&#160;&#160;&#160;42</td></tr>
<tr class="memdesc:aba5ba18a0b68130c63410845f87fa708"><td class="mdescLeft">&#160;</td><td class="mdescRight">The meaning of life, the universe, and everything. <br /></td></tr>
<tr class="separator:aba5ba18a0b68130c63410845f87fa708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59c9fcdb8191a6e3d7e43d31e4c4448c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a59c9fcdb8191a6e3d7e43d31e4c4448c">MPIERR</a>(e)</td></tr>
<tr class="memdesc:a59c9fcdb8191a6e3d7e43d31e4c4448c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle MPI errors.  <a href="example2_8c.html#a59c9fcdb8191a6e3d7e43d31e4c4448c">More...</a><br /></td></tr>
<tr class="separator:a59c9fcdb8191a6e3d7e43d31e4c4448c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a588357de2986fdf4c1380190f7ae9f37"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a588357de2986fdf4c1380190f7ae9f37">ERR</a>(e)</td></tr>
<tr class="memdesc:a588357de2986fdf4c1380190f7ae9f37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle non-MPI errors by finalizing the MPI library and exiting with an exit code.  <a href="example2_8c.html#a588357de2986fdf4c1380190f7ae9f37">More...</a><br /></td></tr>
<tr class="separator:a588357de2986fdf4c1380190f7ae9f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae769ca99bba831a6bfbf2e98d60aa1fb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#ae769ca99bba831a6bfbf2e98d60aa1fb">NUM_EVENTS</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ae769ca99bba831a6bfbf2e98d60aa1fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of MPE events.  <a href="example2_8c.html#ae769ca99bba831a6bfbf2e98d60aa1fb">More...</a><br /></td></tr>
<tr class="separator:ae769ca99bba831a6bfbf2e98d60aa1fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a846551741a0d8ec6d1efd5491798d50d"><td class="memItemLeft" align="right" valign="top"><a id="a846551741a0d8ec6d1efd5491798d50d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a846551741a0d8ec6d1efd5491798d50d">ERR_FILE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a846551741a0d8ec6d1efd5491798d50d"><td class="mdescLeft">&#160;</td><td class="mdescRight">File error. <br /></td></tr>
<tr class="separator:a846551741a0d8ec6d1efd5491798d50d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc1c55bd43b78aaf61c3c28dc9cb750"><td class="memItemLeft" align="right" valign="top"><a id="adfc1c55bd43b78aaf61c3c28dc9cb750"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#adfc1c55bd43b78aaf61c3c28dc9cb750">ERR_DUMB</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:adfc1c55bd43b78aaf61c3c28dc9cb750"><td class="mdescLeft">&#160;</td><td class="mdescRight">File error. <br /></td></tr>
<tr class="separator:adfc1c55bd43b78aaf61c3c28dc9cb750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8700518a3e3d0c7a4439a37dcbcf2143"><td class="memItemLeft" align="right" valign="top"><a id="a8700518a3e3d0c7a4439a37dcbcf2143"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a8700518a3e3d0c7a4439a37dcbcf2143">ERR_ARG</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:a8700518a3e3d0c7a4439a37dcbcf2143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Argument error. <br /></td></tr>
<tr class="separator:a8700518a3e3d0c7a4439a37dcbcf2143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d9553c1e528e2f6e6226bf40244c17d"><td class="memItemLeft" align="right" valign="top"><a id="a8d9553c1e528e2f6e6226bf40244c17d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a8d9553c1e528e2f6e6226bf40244c17d">ERR_MPI</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a8d9553c1e528e2f6e6226bf40244c17d"><td class="mdescLeft">&#160;</td><td class="mdescRight">MPI error. <br /></td></tr>
<tr class="separator:a8d9553c1e528e2f6e6226bf40244c17d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65314c5dd79f3247b47cef6dcfa6c748"><td class="memItemLeft" align="right" valign="top"><a id="a65314c5dd79f3247b47cef6dcfa6c748"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a65314c5dd79f3247b47cef6dcfa6c748">ERR_MPITYPE</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:a65314c5dd79f3247b47cef6dcfa6c748"><td class="mdescLeft">&#160;</td><td class="mdescRight">MPI Type error. <br /></td></tr>
<tr class="separator:a65314c5dd79f3247b47cef6dcfa6c748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d57548eba68469d3ee9811c6be8d51f"><td class="memItemLeft" align="right" valign="top"><a id="a0d57548eba68469d3ee9811c6be8d51f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a0d57548eba68469d3ee9811c6be8d51f">ERR_LOGGING</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:a0d57548eba68469d3ee9811c6be8d51f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logging error. <br /></td></tr>
<tr class="separator:a0d57548eba68469d3ee9811c6be8d51f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38a7a87f1fb37053860698d12ab57204"><td class="memItemLeft" align="right" valign="top"><a id="a38a7a87f1fb37053860698d12ab57204"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a38a7a87f1fb37053860698d12ab57204">ERR_UPDATE</a>&#160;&#160;&#160;7</td></tr>
<tr class="memdesc:a38a7a87f1fb37053860698d12ab57204"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update error. <br /></td></tr>
<tr class="separator:a38a7a87f1fb37053860698d12ab57204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fa34d0453878ec1372e6a0d4abd3b6d"><td class="memItemLeft" align="right" valign="top"><a id="a2fa34d0453878ec1372e6a0d4abd3b6d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a2fa34d0453878ec1372e6a0d4abd3b6d">ERR_CALC</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:a2fa34d0453878ec1372e6a0d4abd3b6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculation error. <br /></td></tr>
<tr class="separator:a2fa34d0453878ec1372e6a0d4abd3b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb3b6f850bf98d006197340a84b2eab2"><td class="memItemLeft" align="right" valign="top"><a id="adb3b6f850bf98d006197340a84b2eab2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#adb3b6f850bf98d006197340a84b2eab2">ERR_COUNT</a>&#160;&#160;&#160;9</td></tr>
<tr class="memdesc:adb3b6f850bf98d006197340a84b2eab2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count error. <br /></td></tr>
<tr class="separator:adb3b6f850bf98d006197340a84b2eab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdfbdd5affe2e04429a4373950c83cd5"><td class="memItemLeft" align="right" valign="top"><a id="abdfbdd5affe2e04429a4373950c83cd5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#abdfbdd5affe2e04429a4373950c83cd5">ERR_WRITE</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:abdfbdd5affe2e04429a4373950c83cd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write error. <br /></td></tr>
<tr class="separator:abdfbdd5affe2e04429a4373950c83cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f2f799484c6d978e059480f40899e76"><td class="memItemLeft" align="right" valign="top"><a id="a4f2f799484c6d978e059480f40899e76"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a4f2f799484c6d978e059480f40899e76">ERR_SWAP</a>&#160;&#160;&#160;11</td></tr>
<tr class="memdesc:a4f2f799484c6d978e059480f40899e76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Swap error. <br /></td></tr>
<tr class="separator:a4f2f799484c6d978e059480f40899e76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adafb13cdcd6c08be46965933662b65f5"><td class="memItemLeft" align="right" valign="top"><a id="adafb13cdcd6c08be46965933662b65f5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#adafb13cdcd6c08be46965933662b65f5">ERR_INIT</a>&#160;&#160;&#160;12</td></tr>
<tr class="memdesc:adafb13cdcd6c08be46965933662b65f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init error. <br /></td></tr>
<tr class="separator:adafb13cdcd6c08be46965933662b65f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a34cfad2213dacda3f966cb58ca85ec62"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a34cfad2213dacda3f966cb58ca85ec62">init_logging</a> (int my_rank, int event_num[][<a class="el" href="example2_8c.html#ae769ca99bba831a6bfbf2e98d60aa1fb">NUM_EVENTS</a>])</td></tr>
<tr class="memdesc:a34cfad2213dacda3f966cb58ca85ec62"><td class="mdescLeft">&#160;</td><td class="mdescRight">This will set up the MPE logging event numbers.  <a href="example2_8c.html#a34cfad2213dacda3f966cb58ca85ec62">More...</a><br /></td></tr>
<tr class="separator:a34cfad2213dacda3f966cb58ca85ec62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68a3f52d3825a0739cf5e076cfbebd9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a68a3f52d3825a0739cf5e076cfbebd9a">check_file</a> (int ntasks, char *filename)</td></tr>
<tr class="memdesc:a68a3f52d3825a0739cf5e076cfbebd9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the output file.  <a href="example2_8c.html#a68a3f52d3825a0739cf5e076cfbebd9a">More...</a><br /></td></tr>
<tr class="separator:a68a3f52d3825a0739cf5e076cfbebd9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc94683e96f58797755afd533c093c45"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#adc94683e96f58797755afd533c093c45">calculate_value</a> (int my_rank, int timestep, float *datap)</td></tr>
<tr class="memdesc:adc94683e96f58797755afd533c093c45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate sample data.  <a href="example2_8c.html#adc94683e96f58797755afd533c093c45">More...</a><br /></td></tr>
<tr class="separator:adc94683e96f58797755afd533c093c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main execution of code.  <a href="example2_8c.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0627610196e3a985e29c69528b79a954"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a0627610196e3a985e29c69528b79a954">exerr_buffer</a> [MPI_MAX_ERROR_STRING]</td></tr>
<tr class="memdesc:a0627610196e3a985e29c69528b79a954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global err buffer for MPI.  <a href="example2_8c.html#a0627610196e3a985e29c69528b79a954">More...</a><br /></td></tr>
<tr class="separator:a0627610196e3a985e29c69528b79a954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4411d1d09fde27d1e16fc86969a420b7"><td class="memItemLeft" align="right" valign="top"><a id="a4411d1d09fde27d1e16fc86969a420b7"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a4411d1d09fde27d1e16fc86969a420b7">exresultlen</a></td></tr>
<tr class="memdesc:a4411d1d09fde27d1e16fc86969a420b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the length of the most recent MPI error message, stored int the global error string. <br /></td></tr>
<tr class="separator:a4411d1d09fde27d1e16fc86969a420b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff6a13fe5da4f73ddbd691b94aaec9a"><td class="memItemLeft" align="right" valign="top"><a id="a2ff6a13fe5da4f73ddbd691b94aaec9a"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a2ff6a13fe5da4f73ddbd691b94aaec9a">dim_name</a> [<a class="el" href="example2_8c.html#a2b1fd2d28c6a7d4a3f7027cc1b6466f3">NDIM</a>][<a class="el" href="pio_8h.html#aa20fd333b6f32f0d29f9fca34e92760e">PIO_MAX_NAME</a>+1] = {&quot;timestep&quot;, &quot;x&quot;, &quot;y&quot;}</td></tr>
<tr class="memdesc:a2ff6a13fe5da4f73ddbd691b94aaec9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The dimension names. <br /></td></tr>
<tr class="separator:a2ff6a13fe5da4f73ddbd691b94aaec9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cdd029eb53af7edd1f798d8d2425b2b"><td class="memItemLeft" align="right" valign="top"><a id="a0cdd029eb53af7edd1f798d8d2425b2b"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#a0cdd029eb53af7edd1f798d8d2425b2b">dim_len</a> [<a class="el" href="example2_8c.html#a2b1fd2d28c6a7d4a3f7027cc1b6466f3">NDIM</a>] = {NC_UNLIMITED, <a class="el" href="example2_8c.html#ab9c24d600c2a3b13b5e96029500fca22">X_DIM_LEN</a>, <a class="el" href="example2_8c.html#afc0499853168ac31cd7dea8099d7dcfd">Y_DIM_LEN</a>}</td></tr>
<tr class="memdesc:a0cdd029eb53af7edd1f798d8d2425b2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of the dimensions in the sample data. <br /></td></tr>
<tr class="separator:a0cdd029eb53af7edd1f798d8d2425b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac370740bf1adc58a8c18773ffd823ebf"><td class="memItemLeft" align="right" valign="top"><a id="ac370740bf1adc58a8c18773ffd823ebf"></a>
<a class="el" href="pio_8h.html#a1225edb54e6d6de678bf675485549eb0">PIO_Offset</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="example2_8c.html#ac370740bf1adc58a8c18773ffd823ebf">chunksize</a> [<a class="el" href="example2_8c.html#a2b1fd2d28c6a7d4a3f7027cc1b6466f3">NDIM</a>] = {2, <a class="el" href="example2_8c.html#ab9c24d600c2a3b13b5e96029500fca22">X_DIM_LEN</a>/2, <a class="el" href="example2_8c.html#afc0499853168ac31cd7dea8099d7dcfd">Y_DIM_LEN</a>/2}</td></tr>
<tr class="memdesc:ac370740bf1adc58a8c18773ffd823ebf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of chunksizes to use in netCDF-4 files. <br /></td></tr>
<tr class="separator:ac370740bf1adc58a8c18773ffd823ebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple C example for the ParallelIO Library.</p>
<p>This example creates a netCDF output file with one 3D variable. One of the dimensions will be unlimited. The example first writes the sample file using the ParallelIO library, then reads it with the plain old netCDF library to check that it is correct.</p>
<p>This example can be run in parallel for 1, 2, 4, 8, or 16 processors.</p>
<p>This example uses the MPE performace profiling library, if it is present on the build machine. After the program is run, MPE will produce a file called example2.clog2. In order to see the nice graphs, execute the commands:</p>
<pre>
clog2ToSlog2 example2.clog2
jumpshot example2.slog2
</pre> </div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a588357de2986fdf4c1380190f7ae9f37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a588357de2986fdf4c1380190f7ae9f37">&#9670;&nbsp;</a></span>ERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keywordflow">do</span> {                \</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Error %d in %s, line %d\n&quot;</span>, e, __FILE__, __LINE__); \</div>
<div class="line">        MPI_Finalize();             \</div>
<div class="line">        return e;               \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>Handle non-MPI errors by finalizing the MPI library and exiting with an exit code. </p>

</div>
</div>
<a id="a59c9fcdb8191a6e3d7e43d31e4c4448c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59c9fcdb8191a6e3d7e43d31e4c4448c">&#9670;&nbsp;</a></span>MPIERR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPIERR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        <span class="keywordflow">do</span> {                                                  \</div>
<div class="line">        MPI_Error_string(e, <a class="code" href="example2_8c.html#a0627610196e3a985e29c69528b79a954">exerr_buffer</a>, &amp;<a class="code" href="example2_8c.html#a4411d1d09fde27d1e16fc86969a420b7">exresultlen</a>);            \</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;MPI error, line %d, file %s: %s\n&quot;</span>, __LINE__, __FILE__, <a class="code" href="example2_8c.html#a0627610196e3a985e29c69528b79a954">exerr_buffer</a>); \</div>
<div class="line">        MPI_Finalize();                         \</div>
<div class="line">        return 2;                           \</div>
<div class="line">    } <span class="keywordflow">while</span> (0)</div>
</div><!-- fragment -->
<p>Handle MPI errors. </p>
<p>This should only be used with MPI library function calls. </p>

</div>
</div>
<a id="a2b1fd2d28c6a7d4a3f7027cc1b6466f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b1fd2d28c6a7d4a3f7027cc1b6466f3">&#9670;&nbsp;</a></span>NDIM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NDIM&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of dimensions in the example data. </p>
<p>In this example, we are using three-dimensional data. </p>

</div>
</div>
<a id="ae769ca99bba831a6bfbf2e98d60aa1fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae769ca99bba831a6bfbf2e98d60aa1fb">&#9670;&nbsp;</a></span>NUM_EVENTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_EVENTS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of MPE events. </p>
<p>The start and stop of each event will be tracked, and graphed. This value is used outside of HAVE_MPE ifdefs. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adc94683e96f58797755afd533c093c45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc94683e96f58797755afd533c093c45">&#9670;&nbsp;</a></span>calculate_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int calculate_value </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>my_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>datap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate sample data. </p>
<p>This function is deliberately slow in order to take up some time calculating. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">my_rank</td><td>the rank of the processor running the code. </td></tr>
    <tr><td class="paramname">timestep</td><td>the timestep. </td></tr>
    <tr><td class="paramname">datap</td><td>pointer where we should write datum.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero for success, non-zero otherwise. </dd></dl>

</div>
</div>
<a id="a68a3f52d3825a0739cf5e076cfbebd9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68a3f52d3825a0739cf5e076cfbebd9a">&#9670;&nbsp;</a></span>check_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int check_file </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ntasks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the output file. </p>
<p>Use netCDF to check that the output is as expected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ntasks</td><td>The number of processors running the example. </td></tr>
    <tr><td class="paramname">filename</td><td>The name of the example file to check.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if example file is correct, non-zero otherwise. </dd></dl>
<p>&lt; File ID from netCDF.</p>
<p>&lt; Number of dimensions.</p>
<p>&lt; Number of variables.</p>
<p>&lt; Number of global attributes.</p>
<p>&lt; ID of unlimited dimension.</p>
<p>&lt; Length of the dimension.</p>
<p>&lt; Number of variable attributes.</p>
<p>&lt; NetCDF data type of this variable.</p>
<p>&lt; Return code for function calls.</p>
<p>&lt; Dimension ids for this variable.</p>
<p>&lt; Name of the dimension.</p>
<p>&lt; Name of the variable.</p>
<p>&lt; Zero-based index to start read.</p>
<p>&lt; Number of elements to read.</p>
<p>&lt; Buffer to read in data.</p>
<p>&lt; Data values we expect to find.</p>

</div>
</div>
<a id="a34cfad2213dacda3f966cb58ca85ec62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34cfad2213dacda3f966cb58ca85ec62">&#9670;&nbsp;</a></span>init_logging()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int init_logging </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>my_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event_num</em>[][NUM_EVENTS]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This will set up the MPE logging event numbers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">my_rank</td><td>the rank of the processor running the code. </td></tr>
    <tr><td class="paramname">event_num</td><td>array of MPE event numbers.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, non-zero for failure. </dd></dl>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main execution of code. </p>
<p>Executes the functions to:</p><ul>
<li>create a new examplePioClass instance</li>
<li>initialize MPI and the ParallelIO libraries</li>
<li>create the decomposition for this example</li>
<li>create the netCDF output file</li>
<li>define the variable in the file</li>
<li>write data to the variable in the file using decomposition</li>
<li>read the data back from the file using decomposition</li>
<li>close the file</li>
<li>clean up resources</li>
</ul>
<p>The example can be run from the command line (on system that support it) like this: </p><pre>
mpiexec -n 4 ./examplePio
</pre><p>The sample file created by this program is a small netCDF file. It has the following contents (as shown by ncdump) for a 4-processor run:</p>
<pre>
netcdf examplePio_c {
dimensions:
x = 16 ;
variables:
int foo(x) ;
data:</pre><pre>foo = 42, 42, 42, 42, 43, 43, 43, 43, 44, 44, 44, 44, 45, 45, 45, 45 ;
}
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">argc</td><td>argument count (should be zero) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">argv</td><td>argument array (should be NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">examplePioClass*</td><td>Pointer to self. </td></tr>
  </table>
  </dd>
</dl>
<p>Set to non-zero to get output to stdout.</p>
<p>Zero-based rank of processor.</p>
<p>Number of processors involved in current execution.</p>
<p>Different output flavors. The example file is written (and then read) four times. The first two flavors, parallel-netcdf, and netCDF serial, both produce a netCDF classic format file (but with different libraries). The last two produce netCDF4/HDF5 format files, written with and without using netCDF-4 parallel I/O.</p>
<p>Names for the output files. Two of them (pnetcdf and classic) will be in classic netCDF format, the others (serial4 and parallel4) will be in netCDF-4/HDF5 format. All four can be read by the netCDF library, and all will contain the same contents.</p>
<p>Number of processors that will do IO. In this example we will do IO from all processors.</p>
<p>Stride in the mpi rank between io tasks. Always 1 in this example.</p>
<p>Number of the aggregator? Always 0 in this example.</p>
<p>Zero based rank of first processor to be used for I/O.</p>
<p>Specifies the flavor of netCDF output format.</p>
<p>The dimension IDs.</p>
<p>Array index per processing unit. This is the number of elements of the data array that will be handled by each processor. In this example there are 16 data elements. If the example is run on 4 processors, then arrIdxPerPe will be 4.</p>
<p>The ID for the parallel I/O system. It is set by <a class="el" href="group___p_i_o__init__c.html#ga479a1d9fe2edfc7ca321a1b482fe0211" title="Library initialization used when IO tasks are a subset of compute tasks.">PIOc_Init_Intracomm()</a>. It references an internal structure containing the general IO subsystem data and MPI structure. It is passed to <a class="el" href="pio_8h.html#a04e150e10a29f037979dc2eaa872bdb5" title="Shut down an iosystem and free all associated resources.">PIOc_finalize()</a> to free associated resources, after all I/O, but before MPI_Finalize is called.</p>
<p>The ncid of the netCDF file created in this example.</p>
<p>The ID of the netCDF varable in the example file.</p>
<p>The I/O description ID as passed back by <a class="el" href="group___p_i_o__initdecomp__c.html#ga56c119d47d1082df044968f80acbe265" title="Initialize the decomposition used with distributed arrays.">PIOc_InitDecomp()</a> and freed in <a class="el" href="group___p_i_o__freedecomp__c.html#ga6416ad3c81a99f31f8f55e857acd697e" title="Free a decomposition map.">PIOc_freedecomp()</a>.</p>
<p>A buffer for sample data. The size of this array will vary depending on how many processors are involved in the execution of the example code. It's length will be the same as elements_per_pe.</p>
<p>A buffer for reading data back from the file. The size of this array will vary depending on how many processors are involved in the execution of the example code. It's length will be the same as elements_per_pe.</p>
<p>A 1-D array which holds the decomposition mapping for this example. The size of this array will vary depending on how many processors are involved in the execution of the example code. It's length will be the same as elements_per_pe.</p>
<p>Needed for command line processing.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a0627610196e3a985e29c69528b79a954"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0627610196e3a985e29c69528b79a954">&#9670;&nbsp;</a></span>exerr_buffer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char exerr_buffer[MPI_MAX_ERROR_STRING]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global err buffer for MPI. </p>
<p>When there is an MPI error, this buffer is used to store the error message that is associated with the MPI error. </p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="aexample2_8c_html_a4411d1d09fde27d1e16fc86969a420b7"><div class="ttname"><a href="example2_8c.html#a4411d1d09fde27d1e16fc86969a420b7">exresultlen</a></div><div class="ttdeci">int exresultlen</div><div class="ttdoc">This is the length of the most recent MPI error message, stored int the global error string.</div><div class="ttdef"><b>Definition:</b> example2.c:89</div></div>
<div class="ttc" id="aexample2_8c_html_a0627610196e3a985e29c69528b79a954"><div class="ttname"><a href="example2_8c.html#a0627610196e3a985e29c69528b79a954">exerr_buffer</a></div><div class="ttdeci">char exerr_buffer[MPI_MAX_ERROR_STRING]</div><div class="ttdoc">Global err buffer for MPI.</div><div class="ttdef"><b>Definition:</b> example2.c:85</div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Mar 2 2021 10:44:51 for PIO by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
